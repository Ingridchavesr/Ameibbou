<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Cadastro de Responsável + Criança</title>
  <style>
    body { font-family: Arial; margin: 30px; }
    h2 { margin-top: 40px; }
    input, button { margin: 5px 0; display: block; }
  </style>
</head>
<body>

  <h1>Cadastro Inicial</h1>

  <h2>Responsável</h2>
  <input id="r-email" placeholder="email do responsavel">
  <input id="r-telefone" placeholder="telefone do responsavel">
  <input id="r-senha" placeholder="Senha" type="password">

  <h2>Criança</h2>
  <input id="u-nome" placeholder="Nome da Criança">
  <input id="u-idade" type="number" placeholder="Idade">
  <input id="u-genero" placeholder="Genero">
  <input id="u-hiperfoco" placeholder="hiperfoco">

  <button onclick="registrar()">Cadastrar Tudo</button>

  <h2>Ver Crianças</h2>
  <button onclick="consultarUsuarios()">Listar</button>

  <pre id="resposta"></pre>

  <script>
    const API = "http://localhost:3000";

    function registrar() {
      const responsavel = {
        email: document.getElementById("r-email").value,
        telefone: document.getElementById("r-telefone").value,
        senha: document.getElementById("r-senha").value
      };

      const crianca = {
        nome_usuario: document.getElementById("u-nome").value,
        idade: parseInt(document.getElementById("u-idade").value),
        genero: document.getElementById("u-genero").value,
        hiperfoco: document.getElementById("u-hiperfoco").value
      };

      fetch(`${API}/registrar`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ responsavel, crianca })
      })
      .then(res => res.text())
      .then(msg => document.getElementById("resposta").innerText = msg);
    }

    function consultarUsuarios() {
      fetch(`${API}/usuarios`)
        .then(res => res.json())
        .then(data => {
          document.getElementById("resposta").innerText = JSON.stringify(data, null, 2);
        });
    }
  </script>
</body>
</html>
